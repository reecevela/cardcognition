Just adding some notes here while working on a db update to try and normalize it.

OLD DB SCHEMA:

CREATE TABLE IF NOT EXISTS public.edhrec_commanders
(
    id integer NOT NULL DEFAULT 'nextval('edhrec_commanders_id_seq'::regclass)',    -- Ex. 15
    name text COLLATE pg_catalog."default" NOT NULL,                                -- Ex. aboshan-cephalid-emperor => can be reduced to 100 chars
    scryfall_id character varying(255) COLLATE pg_catalog."default",                -- Ex. 82db4a41-03e8-4f0c-946c-a98fc5c9f7c8 => can be reduced to 36 chars
    card_name character varying(255) COLLATE pg_catalog."default",                  -- Ex. Aboshan, Cephalid Emperor => can be decreased to 100 chars
    CONSTRAINT edhrec_commanders_pkey PRIMARY KEY (id),
    CONSTRAINT edhrec_commanders_name_key UNIQUE (name)
)

CREATE TABLE IF NOT EXISTS public.edhrec_cards
(
    id integer NOT NULL DEFAULT 'nextval('edhrec_cards_id_seq'::regclass)',         -- Ex. 173993
    commander_id integer,                                                           -- Ex. 748
    card_name text COLLATE pg_catalog."default",                                    -- Ex. Fiendish Duo
    percentage numeric,                                                             -- Ex. 24
    num_decks integer,                                                              -- Ex. 2392
    synergy_score numeric,                                                          -- Ex. 12.0 => Generated by: percentage / frequency = synergy score
                                                                                    -- Note - regular frequency can be inferred by: percentage / synergy_score = frequency
    scryfall_id text COLLATE pg_catalog."default",                                  -- Ex. acb3ce9b-ee4f-410a-8db3-e87aeb0a4444
    CONSTRAINT edhrec_cards_pkey PRIMARY KEY (id),
    CONSTRAINT unique_commander_card UNIQUE (commander_id, card_name)
)

nextval('edhrec_cards_id_seq'::regclass) -- what the id has in edhrec_cards

Using this, we'll try and normalize the database by extracting some of the individual card data to a scyrfall_cards table:

CREATE TABLE IF NOT EXISTS public.scryfall_cards
(
    id integer NOT NULL DEFAULT 'nextval('scryfall_cards_id_seq'::regclass)',       -- Ex. 173993
    scryfall_id text COLLATE pg_catalog."default",                                  -- Ex. acb3ce9b-ee4f-410a-8db3-e87aeb0a4444
    card_name text COLLATE pg_catalog."default",                                    -- Ex. Fiendish Duo
    CONSTRAINT scryfall_cards_pkey PRIMARY KEY (id),
    CONSTRAINT unique_scryfall_card UNIQUE (scryfall_id)
)

CREATE TABLE IF NOT EXISTS public.edhrec_cards
(
    id integer NOT NULL DEFAULT 'nextval('edhrec_cards_id_seq'::regclass)',         -- Ex. 173993
    commander_id integer,                                                           -- Ex. 748
    card_id integer,                                                                -- Ex. 173993
    percentage numeric,                                                             -- Ex. 24
    num_decks integer,                                                              -- Ex. 2392
    synergy_score numeric,                                                          -- Ex. 12.0 => Generated by: percentage / frequency = synergy score
                                                                                    -- Note - regular frequency can be inferred by: percentage / synergy_score = frequency
    CONSTRAINT edhrec_cards_pkey PRIMARY KEY (id),
    CONSTRAINT unique_commander_card UNIQUE (commander_id, card_id)
)

Total DB size before migration: 34MB
Total DB size after migration: 30MB
